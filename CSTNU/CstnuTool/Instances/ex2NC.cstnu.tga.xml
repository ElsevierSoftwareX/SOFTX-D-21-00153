<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE nta PUBLIC "-//Uppaal Team//DTD Flat System 1.1//EN"
                     "http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd">
<nta>
    <template>
        <name>ex2C_cstnu</name>
        <!--Clock and proposition declarations-->
        <declaration>clock tG, tDelta, tn1, tn2, tn3, tA;
bool xn1, xn2, xn3, xA;
int [-1,1] a = 0;</declaration>
        <!--Node declarations-->
        <location id="agnes">
            <name>agnes</name>
            <urgent/>
        </location>
        <location id="vera">
            <name>vera</name>
        </location>
        <location id="goal">
            <name>goal</name>
        </location>
        <location id="go">
            <name>go</name>
            <urgent/>
        </location>
        <location id="go1">
            <name>go1</name>
            <urgent/>
        </location>
        <init ref="agnes"/>
        <!--Transition declarations-->
        <!--GAIN transition-->
        <transition action="gain" controllable="false">
            <source ref="vera"/>
            <target ref="agnes"/>
            <label kind="guard">tDelta &gt; 0</label>
            <label kind="assignment"/>
        </transition>
        <!--PASS transition-->
        <transition action="pass" controllable="false">
            <source ref="agnes"/>
            <target ref="vera"/>
            <label kind="guard"/>
            <label kind="assignment">tDelta := 0</label>
        </transition>
        <!--Transitions for clock setting-->
        <transition action="set_xn1" controllable="false">
            <source ref="agnes"/>
            <target ref="agnes"/>
            <label kind="guard">!xn1</label>
            <label kind="assignment">xn1 := true,tn1 := 0</label>
        </transition>
        <transition action="set_xn2" controllable="false">
            <source ref="agnes"/>
            <target ref="agnes"/>
            <label kind="guard">!xn2</label>
            <label kind="assignment">xn2 := true,tn2 := 0</label>
        </transition>
        <transition action="set_xn3" controllable="false">
            <source ref="agnes"/>
            <target ref="agnes"/>
            <label kind="guard">!xn3</label>
            <label kind="assignment">xn3 := true,tn3 := 0</label>
        </transition>
        <!--Transitions for proposition setting-->
        <transition action="set_a" controllable="false">
            <source ref="agnes"/>
            <target ref="agnes"/>
            <label kind="guard">!xA &amp;&amp; a == 0</label>
            <label kind="assignment">xA := true, tA := 0</label>
        </transition>
        <transition action="set_a_false" controllable="true">
            <source ref="vera"/>
            <target ref="vera"/>
            <label kind="guard">xA &amp;&amp; a == 0</label>
            <label kind="assignment">a := -1, tDelta := 0</label>
        </transition>
        <transition action="set_a_true" controllable="true">
            <source ref="vera"/>
            <target ref="vera"/>
            <label kind="guard">xA &amp;&amp; a == 0</label>
            <label kind="assignment">a := 1, tDelta := 0</label>
        </transition>
        <transition action="anot_set" controllable="false">
            <source ref="agnes"/>
            <target ref="goal"/>
            <label kind="guard">xA &amp;&amp; a == 0 &amp;&amp; tDelta &gt; 0</label>
            <label kind="assignment"/>
        </transition>
        <!--Transitions for contingent-constraint setting-->
        <!--WIN transitions-->
        <transition action="win_labelled1a" controllable="true">
            <source ref="go"/>
            <target ref="go1"/>
            <label kind="guard">(a == 1)</label>
            <label kind="assignment"/>
        </transition>
        <transition action="win_labelled1" controllable="true">
            <source ref="go"/>
            <target ref="go1"/>
            <label kind="guard">(tn1 - tn3 &lt;= -3) &amp;&amp; (tA - tn1 &lt;= -3) &amp;&amp; (tn3 - tn1 &lt;= 4) &amp;&amp; (tn1 - tA &lt;= 4)</label>
            <label kind="assignment"/>
        </transition>
        <transition action="win_labelled2a" controllable="true">
            <source ref="go1"/>
            <target ref="goal"/>
            <label kind="guard">(a == -1)</label>
            <label kind="assignment"/>
        </transition>
        <transition action="win_labelled2" controllable="true">
            <source ref="go1"/>
            <target ref="goal"/>
            <label kind="guard">(tn2 - tn3 &lt;= -5) &amp;&amp; (tn2 - tA &lt;= 10) &amp;&amp; (tn3 - tn2 &lt;= 10) &amp;&amp; (tA - tn2 &lt;= -5)</label>
            <label kind="assignment"/>
        </transition>
        <transition action="win_unlabelled" controllable="false">
            <source ref="agnes"/>
            <target ref="go"/>
            <label kind="guard">xn1 &amp;&amp; xn2 &amp;&amp; xn3 &amp;&amp; xA &amp;&amp; (tn3 - tA &lt;= 7) &amp;&amp; (tA - tn3 &lt;= -7)</label>
            <label kind="assignment"/>
        </transition>
        <system>_processMain = ex2C_cstnu();
		system _processMain;</system>
    </template>
</nta>
